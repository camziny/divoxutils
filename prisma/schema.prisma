generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Account {
  id                 Int     @id @default(autoincrement()) @unique
  userId             Int?     @unique
  user               User?    @relation(fields: [userId], references: [id])
  providerType       String
  providerId         String
  providerAccountId  String  @unique
  password           String?
  refreshToken       String?
  accessToken        String?
  accessTokenExpires DateTime?
  createdAt          DateTime @default(now())
  updatedAt          DateTime @default(now())
}

model User {
  id           Int             @id @default(autoincrement())
  clerkUserId  String          @unique
  email        String          @unique
  name         String?         @unique
  accountId    Int?            @unique
  account      Account?
  characters   UserCharacter[]
}

model Character {
  id       Int    @id @default(autoincrement())
  webId    String @unique
  users    UserCharacter[]
}

model UserCharacter {
  clerkUserId   String
  user          User           @relation(fields: [clerkUserId], references: [clerkUserId])
  characterId   Int
  character     Character      @relation(fields: [characterId], references: [id])
  @@id([clerkUserId, characterId])
}




